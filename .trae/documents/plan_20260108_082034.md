## 问题分析

通过检查小程序代码和后端API实现，发现以下不一致问题：

### 1. 缺少的API端点
- **`/api/user/xxx`** - 用户相关API（登录、获取用户信息、更新用户信息）
- **`/api/card/delete`** - 删除卡片API
- **`/api/analyze`** - 直接分析图片API（当前实现为`/api/upload/analyze`）

### 2. 路径不匹配问题
- 小程序请求：`/api/analyze`
- 实际实现：`/api/upload/analyze`

## 修复计划

### 1. 创建用户相关API端点
- **文件**：`app/api/api_v1/endpoints/user.py`
- **功能**：实现以下端点
  - `POST /api/login` - 用户登录
  - `GET /api/user/{uid}` - 获取用户信息
  - `POST /api/user/update` - 更新用户信息

### 2. 调整分析图片API路径
- **文件**：`app/api/api_v1/endpoints/upload.py`
- **修改**：将`/api/upload/analyze`端点调整为`/api/analyze`

### 3. 添加删除卡片API
- **文件**：`app/api/api_v1/endpoints/card.py`
- **修改**：添加`/api/card/delete`端点

### 4. 更新路由配置
- **文件**：`app/api/api_v1/api.py`
- **修改**：添加用户相关路由

## 预期效果

修复后，小程序请求的所有URL将与后端API实现完全匹配：
- `http://175.178.2.155/api/user/{uid}` - ✅
- `http://175.178.2.155/api/login` - ✅
- `http://175.178.2.155/api/user/update` - ✅
- `http://175.178.2.155/api/scenes` - ✅
- `http://175.178.2.155/api/config/{cardKey}` - ✅
- `http://175.178.2.155/api/upload` - ✅
- `http://175.178.2.155/api/analyze` - ✅
- `http://175.178.2.155/api/admin/save_hotspots` - ✅
- `http://175.178.2.155/api/user/create_card` - ✅
- `http://175.178.2.155/api/card/update_name` - ✅
- `http://175.178.2.155/api/card/delete` - ✅
- `http://175.178.2.155/api/system/config` - ✅

所有API请求将能够正确路由到对应的实现，解决小程序与后端API不匹配的问题。